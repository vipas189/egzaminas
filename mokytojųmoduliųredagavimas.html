<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Login Form | Codeacademy</title>
  <link rel="stylesheet" href="mokytojaidash.css"> <!-- Link your custom CSS file -->
  <style>
    /* Styling for the editing form */
    .form-container {
      background-color: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
      margin-top: 20px;
      width: 100%;
    }

    .form-button {
      background-color: #0078D7;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }

    .form-container label,
    .form-container input,
    .form-container textarea,
    .form-container select {
      display: block;
      width: 100%;
      margin-bottom: 10px;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <!-- Title Section -->
  <div class="title-section">
    <h1>Mokytoju Moduli킬 Redagavimo Puslapis</h1>
  </div>

  <!-- Button Row Wrapper -->
  <div class="button-wrapper">
    <div class="button-row">
      <a href="home.html" class="menu-button">Titulinis</a>
      <a href="info.html" class="menu-button">Info.about</a>
      <a href="studentai.html" class="menu-button">Studentai</a>
      <a href="mokytojaiuzduociukurimas.html" class="menu-button">U탑duotys</a>
      <a href="mokytoj킬moduli킬redagavimas.html" class="menu-button">Moduliai</a>
    </div>
  </div>

  <!-- Corner Wrapper -->
  <div class="corner-wrapper">
    <a href="home.html">Home</a>
  </div>

  <!-- Main Container with Flexbox -->
  <div class="flex-container">
    <!-- Custom Input Section -->
    <div class="wrapper-text">
      <h2>Custom Input</h2>
      <div id="custom-input-area" class="form-style">
        <p>Drop a .jpg image here, paste or type text...</p>
        <div class="scrollable-area" id="scrollable-area">
          <img id="image-preview" alt="" style="display: none;" />
          <textarea id="text-area" placeholder="Or enter text manually..." rows="1"></textarea>
        </div>
        <button type="button" id="submit-button">Submit</button>
        <button type="button" id="embed-button">Embed</button>
      </div>
    </div>

    <!-- Module Information Section -->
    <div id="module-info" class="info-box overlay">
      <h2>Module Information</h2>
      <ul>
        <li>ID: {{ module.id }}</li>
        <li>Module Name: {{ module.name }}</li>
        <li>Module Description: {{ module.description }}</li>
        <li>Credits: {{ module.credits }}</li>
        <li>Semester: {{ module.semester }}</li>
        <li>Lessons Schedule: {{ module.lessons_schedule }}</li>
        <li>Assignments: {{ module.assignments }}</li>
        <li>Exam Date: {{ module.exam_date }}</li>
        <li>Prior Requirements: {{ module.prior_requirements }}</li>
      </ul>
    </div>

    <!-- Module Form Section -->
    <div class="form-container">
      <h2>Create or Edit Module</h2>
      <form id="module-form" method="POST" action="/save-module">
        <label for="module-id">Module ID (for editing):</label>
        <input type="text" id="module-id" name="module_id" placeholder="Leave empty to create new module">

        <label for="module-name">Module Name:</label>
        <input type="text" id="module-name" name="module_name" required>

        <label for="module-description">Module Description:</label>
        <textarea id="module-description" name="module_description" rows="3" required></textarea>

        <label for="module-credits">Credits:</label>
        <input type="number" id="module-credits" name="module_credits" required>

        <label for="module-semester">Semester:</label>
        <select id="module-semester" name="module_semester" required>
          <option value="Spring">Spring</option>
          <option value="Fall">Fall</option>
        </select>

        <label for="module-lessons-schedule">Lessons Schedule:</label>
        <textarea id="module-lessons-schedule" name="module_lessons_schedule" rows="2"></textarea>

        <label for="module-assignments">Assignments:</label>
        <textarea id="module-assignments" name="module_assignments" rows="2"></textarea>

        <label for="module-exam-date">Exam Date:</label>
        <input type="date" id="module-exam-date" name="module_exam_date">

        <label for="module-prior-requirements">Prior Requirements:</label>
        <textarea id="module-prior-requirements" name="module_prior_requirements" rows="2"></textarea>

        <button type="submit" class="form-button">Save Module</button>
      </form>
    </div>
  </div>

  <!-- Embedded JavaScript -->
  <script>
    // Existing JavaScript for drag-and-drop functionality
    const inputArea = document.getElementById('custom-input-area');
    const imagePreview = document.getElementById('image-preview');
    const textArea = document.getElementById('text-area');
    const submitButton = document.getElementById('submit-button');
    const embedButton = document.getElementById('embed-button');
    const scrollFilesButton = document.getElementById('scroll-files-button');
    const scrollableArea = document.getElementById('scrollable-area');

    // Prevent default behavior for drag-and-drop
    inputArea.addEventListener('dragover', (event) => {
      event.preventDefault();
      inputArea.style.borderColor = '#0078d7';
    });

    inputArea.addEventListener('dragleave', () => {
      inputArea.style.borderColor = '#ccc';
    });

    inputArea.addEventListener('drop', (event) => {
      event.preventDefault();
      const file = event.dataTransfer.files[0];
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = () => {
          imagePreview.src = reader.result;
          imagePreview.style.display = 'block';
        };
        reader.readAsDataURL(file);
      } else {
        alert('Please drop a valid image file (e.g., .jpg or .png).');
      }
      inputArea.style.borderColor = '#ccc';
    });

    textArea.addEventListener('input', () => {
      textArea.style.height = "auto";
      textArea.style.height = `${textArea.scrollHeight}px`;
    });

    submitButton.addEventListener('click', () => {
      const enteredData = textArea.value;
      alert(`Data Submitted: ${enteredData}`);
    });

    embedButton.addEventListener('click', () => {
      const enteredData = textArea.value;
      const imageSrc = imagePreview.src;
      if (enteredData || imageSrc) {
        const formData = new FormData();
        formData.append('text', enteredData);
        if (imageSrc) {
          fetch(imageSrc)
            .then(res => res.blob())
            .then(blob => {
              formData.append('image', blob, 'image.jpg');
              alert('Data and image embedded successfully!');
            });
        } else {
          alert('Data embedded successfully!');
        }
      } else {
        alert('Please enter text or drop an image to embed.');
      }
    });
  </script>
</body>
</html>
